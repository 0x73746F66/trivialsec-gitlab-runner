#!/usr/bin/env bash

RED='\033[0;31m'
GREEN='\033[0;32m'
ORANGE='\033[0;33m'
NC='\033[0m' # No Color

if [[ $EUID -eq 0 ]]; then
   echo -e "${RED}x${NC} This script must not be run as root" 
   exit 1
fi
if [[ ! -d scripts ]]; then
    echo -e "${RED}x${NC} Run this from the project root directory"
    exit 0
fi
source .env
d='docker-compose -f docker-compose-dev.yaml '
$d up -d search
$d exec search bash -c 'python /srv/app/sbin/db_mgmt_cpe_dictionary.py -p'
$d exec search bash -c 'python /srv/app/sbin/db_mgmt_json.py -p'
$d exec search bash -c 'python /srv/app/sbin/db_updater.py -c || python /srv/app/sbin/db_updater.py -v -f'
$d exec search bash -c 'python /srv/app/sbin/db_mgmt_ref.py'
$d exec search bash -c 'python /srv/app/sbin/db_fulltext.py -l 0'
